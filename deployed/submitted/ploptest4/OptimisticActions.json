{
  "type": "deployment",
  "id": "OptimisticActions",
  "batch": "ploptest4",
  "batchIndex": 34,
  "deploymentAddress": "0x4410ec298412DDeeC7D5cd6d9B8271Ac6445A96e",
  "constructorArgs": [],
  "to": "0x4e59b44847b379578588920ca78fbf26c0b4956c",
  "value": "0",
  "data": "0x0000000000000000000000000000000000000000000000706c6f70746573743460808060405234610016576111c9908161001b8239f35b5f80fdfe6080806040526004361015610012575f80fd5b5f3560e01c90816301ffc9a714610e17575080632a9ce78b14610d6f578063503082ab14610cf85780638da5cb5b14610cca57806390659f6014610abe5780639d1978e21461049f578063c55b6bb714610414578063c60194ef146101395763f4a523c51461007f575f80fd5b346101355760403660031901126101355760043563ffffffff8116808203610135576001600160401b03602435818111610135576100f3937f6ec7e9b2ac677a2ee570b8fa58dae5f2767dfa6157c7afb4386a026ec22bfef7926100ea610130933690600401610ef3565b9690923361112d565b50335f52600160205260405f20855f5260205260405f20906001600160401b031982541617905560405191829160208352339660208401916110c0565b0390a3005b5f80fd5b3461013557604036600319011261013557610152610e84565b61015a610e9a565b610164818361112d565b9160018060a01b0381165f52600160205260405f2063ffffffff83165f5260205260405f20916001600160401b0380935416421061040257600160ff19855416179283855560018501549360036002870196015460405196879163dabdb38960e01b83526084830160018060a01b0388166004850152602498602485015260806044850152825480915260a484019060a48160051b860101935f5260205f20915f905b8282106103b2575050505060648301525f9290829003908290849060081c6001600160a01b03165af19485156103a7575f945f9661029d575b505060405133936001600160a01b03169263ffffffff1691507f541b022fce588a99d41c70b8fb346dac2c36238eab28353e50a1eb6f12efcfd79080610287888883610f20565b0390a461029960405192839283610f20565b0390f35b9194509194503d805f843e6102b28184610fbf565b82019360408386031261013557825181811161013557830190601f86601f84011215610135578251906102e482610fe0565b976102f2604051998a610fbf565b8289526020808a019360051b860101948186116101355760208101935b86851061032b5750505050505050506020015192848080610240565b84518681116101355782019083603f830112156101355760208201519087821161039457604051610365838801601f191660200182610fbf565b82815285604084860101116101355761038960209493859460408685019101610ead565b81520194019361030f565b89634e487b7160e01b5f5260416004525ffd5b6040513d5f823e3d90fd5b91939460036103f1602092600194969960a319908203018652606090858060a01b038b54168152858b0154858201528160408201520160028a0161102f565b9701920192018b9594939192610207565b604051637d1ce02160e11b8152600490fd5b346101355760403660031901126101355761042d610e84565b6001600160a01b039060243582811691908290036101355781817fbf265e8326285a2747e33e54d5945f7111f2b5edb826eb8c08d4677779b3ff9793856020941695865f526002855261048960405f20938454928316906110e0565b6001600160a01b031916179055604051908152a2005b346101355760a0366003190112610135576004356001600160a01b0381169003610135576001600160401b036044351161013557366023604435011215610135576001600160401b036044356004013511610135573660246044356004013560051b604435010111610135576001600160401b03608435116101355761052a36608435600401610ef3565b335f525f60205260405f209182549263ffffffff808516146107525760019063ffffffff82818716011663ffffffff19861617815563ffffffff85165f520160205260405f208054610100600160a81b0360043560081b1690610100600160a81b0319161781556024356001820155680100000000000000006044356004013511610aaa5760028101805460046044350135918290559081116109f5575b50602460443501600282015f5260205f205f915b60443560040135831061081c57505050600360643591015560405160a0810160018060a01b03600435168252602435602083015260a0604083015260443560040135905260c0810160c06044356004013560051b83010190602460443501905f905b6044356004013582106107785750505090806106947fb3a13e1e0c8b5e4c085d2e688e22dce8174e51ffbb2492a4231140eddb2b91a99360643560608401528281036080840152339663ffffffff8916966110c0565b0390a3335f52600260205260405f206001600160401b034211610766576001600160401b03905460a01c166001600160401b03421601906001600160401b03821161075257602091335f526001835260405f2063ffffffff83165f5283526001600160401b0360405f20911690816001600160401b031982541617905560405190815233907f475c123c20f203f97b02e954d008806c1d0e5ee55726179b528c855a4b3963bd8463ffffffff851692a363ffffffff60405191168152f35b634e487b7160e01b5f52601160045260245ffd5b604051631a93c68960e11b8152600490fd5b90919260bf198582030182528335608219604435360301811215610135576060906044350160248101356001600160a01b0381169081900361013557835260448101356020840152606481013560421982360301811215610135570190604460248301359201926001600160401b0383116101355782360384136101355760019360209383838695604061080f96015201916110c0565b950192019201909161063e565b8035604435360360821901811215610135576044350160248101356001600160a01b038116908190036101355783546001600160a01b031916178355604481013560018401556064810135903681900360421901821215610135576001600160401b0360248383010135116101355760248282010135360360448383010113610135576108ac6002850154610ff7565b90601f918281116109ae575b505f91602484830101351160011461091a57926003926020926001955f916024848301013561090a575b505f1992016024013580861b9290921c191690851b1760028601555b019201920191906105dc565b838201016044013591508d6108e2565b90600285015f5260205f20905f5b83850160240135601f191681106109915750600194600394602094919387936024939190828401850135601f1981161061096f575b5050010135811b0160028601556108fe565b60445f1960f88787870101358c1b161c19918585010101351690558e8061095d565b909160206001819260448689890101013581550193019101610928565b6109e690600287015f5260205f208480602488870101350160051c820192602060248988010135106109ec575b0160051c0190611117565b8a6108b8565b925081926109db565b600381810204810361075257600360443560040135810204604435600401350361075257600282015f5260205f206044356004013560030281015b8260030282018110610a435750506105c8565b805f600392555f600182015560028101610a5d8154610ff7565b9081610a6c575b505001610a30565b5f91601f808211600114610a85575050555b8880610a64565b91610aa384929382845260208420940160051c840160018501611117565b5555610a7e565b634e487b7160e01b5f52604160045260245ffd5b3461013557604036600319011261013557610ad7610e84565b610adf610e9a565b905f6080604051610aef81610fa4565b828152826020820152826040820152606080820152015260018060a01b03165f525f60205263ffffffff600160405f200191165f5260205260405f20604051610b3781610fa4565b815460ff81161515825260081c6001600160a01b031660208201908152600183015460408301526002830180549390610b6f85610fe0565b94610b7d6040519687610fbf565b80865260208601915f5260205f205f925b828410610c5e5750505050600390606084019485520154926080830193845260408051936020855260c085019381511515602087015260018060a01b039051168286015201516060840152519060a06080840152815180915260e0830190602060e08260051b8601019301915f905b828210610c1157865160a087015285850386f35b90919293602080610c5060019360df198a8203018652606060408a51878060a01b03815116845285810151868501520151918160408201520190610ece565b960192019201909291610bfd565b604051908160608101106001600160401b03606084011117610aaa57602060039183606060019501604052848060a01b0386541681528486015483820152604051610cb781610cb08160028b0161102f565b0382610fbf565b6040820152815201920193019290610b8e565b34610135575f36600319011261013557602060405173af7e68bcb2fc7295492a00177f14f59b92814e708152f35b3461013557604036600319011261013557610d11610e84565b610d19610e9a565b905f604051610d2781610f89565b5260018060a01b03165f52600160205263ffffffff60405f2091165f52602052602060405f206001600160401b0360405191610d6283610f89565b5416809152604051908152f35b3461013557604036600319011261013557610d88610e84565b602435906001600160401b03821690818303610135577fe1e450892a0a26ffd9657ad355d63f03cbab7196bb7a21f7dae3e839499798d29160209160018060a01b0380821695865f5260028552610de860405f20938454938416906110e0565b67ffffffffffffffff60a01b1990911660a09190911b67ffffffffffffffff60a01b16179055604051908152a2005b34610135576020366003190112610135576004359063ffffffff60e01b821680920361013557602091638e0946e560e01b8114908115610e59575b5015158152f35b63cb7d736d60e01b811491508115610e73575b5083610e52565b6301ffc9a760e01b14905083610e6c565b600435906001600160a01b038216820361013557565b6024359063ffffffff8216820361013557565b5f5b838110610ebe5750505f910152565b8181015183820152602001610eaf565b90602091610ee781518092818552858086019101610ead565b601f01601f1916010190565b9181601f84011215610135578235916001600160401b038311610135576020838186019501011161013557565b9291906040840190604085528051809252606085019160608160051b870101916020809101935f905b838210610f5d575050505060209150930152565b909192938380610f79600193605f198d82030186528951610ece565b9701920192019094939291610f49565b602081019081106001600160401b03821117610aaa57604052565b60a081019081106001600160401b03821117610aaa57604052565b90601f801991011681019081106001600160401b03821117610aaa57604052565b6001600160401b038111610aaa5760051b60200190565b90600182811c92168015611025575b602083101461101157565b634e487b7160e01b5f52602260045260245ffd5b91607f1691611006565b80545f939261103d82610ff7565b918282526020936001916001811690815f146110a15750600114611063575b5050505050565b90939495505f92919252835f2092845f945b83861061108d57505050500101905f8080808061105c565b805485870183015294019385908201611075565b60ff19168685015250505090151560051b010191505f8080808061105c565b908060209392818452848401375f828201840152601f01601f1916010190565b6001600160a01b039182168061110c57501633036110fa57565b604051636587b01b60e11b8152600490fd5b91505033036110fa57565b818110611122575050565b5f8155600101611117565b6001600160a01b03165f908152602081905260409020805463ffffffff9283169216821015611181576001915f520160205260405f209060ff82541661116f57565b604051636b78fca360e11b8152600490fd5b604051637037cbb560e11b8152600490fdfea26469706673582212207f2c0289c14754696c1c174c260f0b5476aa04688f2c17df61d398a38b13870c64736f6c63430008170033",
  "gas": "1054371",
  "from": "0xaF7E68bCb2Fc7295492A00177f14F59B92814e70",
  "transactionSettings": {
    "chainId": 80001,
    "nonce": "692",
    "baseFee": "8077350007",
    "priorityFee": "1000000000"
  },
  "salt": "\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000ploptest4",
  "artifact": {
    "abi": [
      {
        "type": "function",
        "name": "createAction",
        "inputs": [
          {
            "name": "_manager",
            "type": "address",
            "internalType": "contract IDAOManager"
          },
          { "name": "_role", "type": "uint256", "internalType": "uint256" },
          {
            "name": "_actions",
            "type": "tuple[]",
            "internalType": "struct IDAO.Action[]",
            "components": [
              { "name": "to", "type": "address", "internalType": "address" },
              { "name": "value", "type": "uint256", "internalType": "uint256" },
              { "name": "data", "type": "bytes", "internalType": "bytes" }
            ]
          },
          {
            "name": "_failureMap",
            "type": "uint256",
            "internalType": "uint256"
          },
          { "name": "_metadata", "type": "string", "internalType": "string" }
        ],
        "outputs": [
          { "name": "id", "type": "uint32", "internalType": "uint32" }
        ],
        "stateMutability": "nonpayable"
      },
      {
        "type": "function",
        "name": "executeAction",
        "inputs": [
          {
            "name": "_dao",
            "type": "address",
            "internalType": "contract IDAO"
          },
          { "name": "_id", "type": "uint32", "internalType": "uint32" }
        ],
        "outputs": [
          {
            "name": "returnValues",
            "type": "bytes[]",
            "internalType": "bytes[]"
          },
          { "name": "failureMap", "type": "uint256", "internalType": "uint256" }
        ],
        "stateMutability": "nonpayable"
      },
      {
        "type": "function",
        "name": "getAction",
        "inputs": [
          {
            "name": "_dao",
            "type": "address",
            "internalType": "contract IDAO"
          },
          { "name": "_id", "type": "uint32", "internalType": "uint32" }
        ],
        "outputs": [
          {
            "name": "request",
            "type": "tuple",
            "internalType": "struct ITrustlessActions.ActionRequest",
            "components": [
              { "name": "executed", "type": "bool", "internalType": "bool" },
              {
                "name": "manager",
                "type": "address",
                "internalType": "contract IDAOManager"
              },
              { "name": "role", "type": "uint256", "internalType": "uint256" },
              {
                "name": "actions",
                "type": "tuple[]",
                "internalType": "struct IDAO.Action[]",
                "components": [
                  {
                    "name": "to",
                    "type": "address",
                    "internalType": "address"
                  },
                  {
                    "name": "value",
                    "type": "uint256",
                    "internalType": "uint256"
                  },
                  { "name": "data", "type": "bytes", "internalType": "bytes" }
                ]
              },
              {
                "name": "failureMap",
                "type": "uint256",
                "internalType": "uint256"
              }
            ]
          }
        ],
        "stateMutability": "view"
      },
      {
        "type": "function",
        "name": "getOptimsticAction",
        "inputs": [
          {
            "name": "_dao",
            "type": "address",
            "internalType": "contract IDAO"
          },
          { "name": "_id", "type": "uint32", "internalType": "uint32" }
        ],
        "outputs": [
          {
            "name": "request",
            "type": "tuple",
            "internalType": "struct IOptimisticActions.OptimisticActionRequest",
            "components": [
              {
                "name": "executableFrom",
                "type": "uint64",
                "internalType": "uint64"
              }
            ]
          }
        ],
        "stateMutability": "view"
      },
      {
        "type": "function",
        "name": "owner",
        "inputs": [],
        "outputs": [
          { "name": "", "type": "address", "internalType": "address" }
        ],
        "stateMutability": "pure"
      },
      {
        "type": "function",
        "name": "rejectAction",
        "inputs": [
          { "name": "_id", "type": "uint32", "internalType": "uint32" },
          { "name": "_metadata", "type": "string", "internalType": "string" }
        ],
        "outputs": [],
        "stateMutability": "nonpayable"
      },
      {
        "type": "function",
        "name": "setAdmin",
        "inputs": [
          {
            "name": "_dao",
            "type": "address",
            "internalType": "contract IDAO"
          },
          { "name": "_admin", "type": "address", "internalType": "address" }
        ],
        "outputs": [],
        "stateMutability": "nonpayable"
      },
      {
        "type": "function",
        "name": "setExecuteDelay",
        "inputs": [
          {
            "name": "_dao",
            "type": "address",
            "internalType": "contract IDAO"
          },
          {
            "name": "_executeDelay",
            "type": "uint64",
            "internalType": "uint64"
          }
        ],
        "outputs": [],
        "stateMutability": "nonpayable"
      },
      {
        "type": "function",
        "name": "supportsInterface",
        "inputs": [
          { "name": "_interfaceId", "type": "bytes4", "internalType": "bytes4" }
        ],
        "outputs": [{ "name": "", "type": "bool", "internalType": "bool" }],
        "stateMutability": "view"
      },
      {
        "type": "event",
        "name": "ActionCreated",
        "inputs": [
          {
            "name": "id",
            "type": "uint32",
            "indexed": true,
            "internalType": "uint32"
          },
          {
            "name": "dao",
            "type": "address",
            "indexed": true,
            "internalType": "contract IDAO"
          },
          {
            "name": "manager",
            "type": "address",
            "indexed": false,
            "internalType": "contract IDAOManager"
          },
          {
            "name": "role",
            "type": "uint256",
            "indexed": false,
            "internalType": "uint256"
          },
          {
            "name": "actions",
            "type": "tuple[]",
            "indexed": false,
            "internalType": "struct IDAO.Action[]",
            "components": [
              { "name": "to", "type": "address", "internalType": "address" },
              { "name": "value", "type": "uint256", "internalType": "uint256" },
              { "name": "data", "type": "bytes", "internalType": "bytes" }
            ]
          },
          {
            "name": "failureMap",
            "type": "uint256",
            "indexed": false,
            "internalType": "uint256"
          },
          {
            "name": "metadata",
            "type": "string",
            "indexed": false,
            "internalType": "string"
          }
        ],
        "anonymous": false
      },
      {
        "type": "event",
        "name": "ActionExecuted",
        "inputs": [
          {
            "name": "id",
            "type": "uint32",
            "indexed": true,
            "internalType": "uint32"
          },
          {
            "name": "dao",
            "type": "address",
            "indexed": true,
            "internalType": "contract IDAO"
          },
          {
            "name": "executor",
            "type": "address",
            "indexed": true,
            "internalType": "address"
          },
          {
            "name": "returnValues",
            "type": "bytes[]",
            "indexed": false,
            "internalType": "bytes[]"
          },
          {
            "name": "failureMap",
            "type": "uint256",
            "indexed": false,
            "internalType": "uint256"
          }
        ],
        "anonymous": false
      },
      {
        "type": "event",
        "name": "AdminSet",
        "inputs": [
          {
            "name": "dao",
            "type": "address",
            "indexed": true,
            "internalType": "contract IDAO"
          },
          {
            "name": "admin",
            "type": "address",
            "indexed": false,
            "internalType": "address"
          }
        ],
        "anonymous": false
      },
      {
        "type": "event",
        "name": "OptimisticActionCreated",
        "inputs": [
          {
            "name": "id",
            "type": "uint32",
            "indexed": true,
            "internalType": "uint32"
          },
          {
            "name": "dao",
            "type": "address",
            "indexed": true,
            "internalType": "contract IDAO"
          },
          {
            "name": "executableFrom",
            "type": "uint64",
            "indexed": false,
            "internalType": "uint64"
          }
        ],
        "anonymous": false
      },
      {
        "type": "event",
        "name": "OptimisticActionRejected",
        "inputs": [
          {
            "name": "id",
            "type": "uint32",
            "indexed": true,
            "internalType": "uint32"
          },
          {
            "name": "dao",
            "type": "address",
            "indexed": true,
            "internalType": "contract IDAO"
          },
          {
            "name": "metadata",
            "type": "string",
            "indexed": false,
            "internalType": "string"
          }
        ],
        "anonymous": false
      },
      {
        "type": "event",
        "name": "OptimisticExecuteDelaySet",
        "inputs": [
          {
            "name": "dao",
            "type": "address",
            "indexed": true,
            "internalType": "contract IDAO"
          },
          {
            "name": "executeDelay",
            "type": "uint64",
            "indexed": false,
            "internalType": "uint64"
          }
        ],
        "anonymous": false
      },
      {
        "type": "error",
        "name": "OptimisticRequestNotExecutableYet",
        "inputs": []
      },
      { "type": "error", "name": "Overflow", "inputs": [] },
      { "type": "error", "name": "RequestAlreadyExecuted", "inputs": [] },
      { "type": "error", "name": "RequestDoesNotExist", "inputs": [] },
      { "type": "error", "name": "SenderIsNotAdmin", "inputs": [] }
    ],
    "bytecode": "0x60808060405234610016576111c9908161001b8239f35b5f80fdfe6080806040526004361015610012575f80fd5b5f3560e01c90816301ffc9a714610e17575080632a9ce78b14610d6f578063503082ab14610cf85780638da5cb5b14610cca57806390659f6014610abe5780639d1978e21461049f578063c55b6bb714610414578063c60194ef146101395763f4a523c51461007f575f80fd5b346101355760403660031901126101355760043563ffffffff8116808203610135576001600160401b03602435818111610135576100f3937f6ec7e9b2ac677a2ee570b8fa58dae5f2767dfa6157c7afb4386a026ec22bfef7926100ea610130933690600401610ef3565b9690923361112d565b50335f52600160205260405f20855f5260205260405f20906001600160401b031982541617905560405191829160208352339660208401916110c0565b0390a3005b5f80fd5b3461013557604036600319011261013557610152610e84565b61015a610e9a565b610164818361112d565b9160018060a01b0381165f52600160205260405f2063ffffffff83165f5260205260405f20916001600160401b0380935416421061040257600160ff19855416179283855560018501549360036002870196015460405196879163dabdb38960e01b83526084830160018060a01b0388166004850152602498602485015260806044850152825480915260a484019060a48160051b860101935f5260205f20915f905b8282106103b2575050505060648301525f9290829003908290849060081c6001600160a01b03165af19485156103a7575f945f9661029d575b505060405133936001600160a01b03169263ffffffff1691507f541b022fce588a99d41c70b8fb346dac2c36238eab28353e50a1eb6f12efcfd79080610287888883610f20565b0390a461029960405192839283610f20565b0390f35b9194509194503d805f843e6102b28184610fbf565b82019360408386031261013557825181811161013557830190601f86601f84011215610135578251906102e482610fe0565b976102f2604051998a610fbf565b8289526020808a019360051b860101948186116101355760208101935b86851061032b5750505050505050506020015192848080610240565b84518681116101355782019083603f830112156101355760208201519087821161039457604051610365838801601f191660200182610fbf565b82815285604084860101116101355761038960209493859460408685019101610ead565b81520194019361030f565b89634e487b7160e01b5f5260416004525ffd5b6040513d5f823e3d90fd5b91939460036103f1602092600194969960a319908203018652606090858060a01b038b54168152858b0154858201528160408201520160028a0161102f565b9701920192018b9594939192610207565b604051637d1ce02160e11b8152600490fd5b346101355760403660031901126101355761042d610e84565b6001600160a01b039060243582811691908290036101355781817fbf265e8326285a2747e33e54d5945f7111f2b5edb826eb8c08d4677779b3ff9793856020941695865f526002855261048960405f20938454928316906110e0565b6001600160a01b031916179055604051908152a2005b346101355760a0366003190112610135576004356001600160a01b0381169003610135576001600160401b036044351161013557366023604435011215610135576001600160401b036044356004013511610135573660246044356004013560051b604435010111610135576001600160401b03608435116101355761052a36608435600401610ef3565b335f525f60205260405f209182549263ffffffff808516146107525760019063ffffffff82818716011663ffffffff19861617815563ffffffff85165f520160205260405f208054610100600160a81b0360043560081b1690610100600160a81b0319161781556024356001820155680100000000000000006044356004013511610aaa5760028101805460046044350135918290559081116109f5575b50602460443501600282015f5260205f205f915b60443560040135831061081c57505050600360643591015560405160a0810160018060a01b03600435168252602435602083015260a0604083015260443560040135905260c0810160c06044356004013560051b83010190602460443501905f905b6044356004013582106107785750505090806106947fb3a13e1e0c8b5e4c085d2e688e22dce8174e51ffbb2492a4231140eddb2b91a99360643560608401528281036080840152339663ffffffff8916966110c0565b0390a3335f52600260205260405f206001600160401b034211610766576001600160401b03905460a01c166001600160401b03421601906001600160401b03821161075257602091335f526001835260405f2063ffffffff83165f5283526001600160401b0360405f20911690816001600160401b031982541617905560405190815233907f475c123c20f203f97b02e954d008806c1d0e5ee55726179b528c855a4b3963bd8463ffffffff851692a363ffffffff60405191168152f35b634e487b7160e01b5f52601160045260245ffd5b604051631a93c68960e11b8152600490fd5b90919260bf198582030182528335608219604435360301811215610135576060906044350160248101356001600160a01b0381169081900361013557835260448101356020840152606481013560421982360301811215610135570190604460248301359201926001600160401b0383116101355782360384136101355760019360209383838695604061080f96015201916110c0565b950192019201909161063e565b8035604435360360821901811215610135576044350160248101356001600160a01b038116908190036101355783546001600160a01b031916178355604481013560018401556064810135903681900360421901821215610135576001600160401b0360248383010135116101355760248282010135360360448383010113610135576108ac6002850154610ff7565b90601f918281116109ae575b505f91602484830101351160011461091a57926003926020926001955f916024848301013561090a575b505f1992016024013580861b9290921c191690851b1760028601555b019201920191906105dc565b838201016044013591508d6108e2565b90600285015f5260205f20905f5b83850160240135601f191681106109915750600194600394602094919387936024939190828401850135601f1981161061096f575b5050010135811b0160028601556108fe565b60445f1960f88787870101358c1b161c19918585010101351690558e8061095d565b909160206001819260448689890101013581550193019101610928565b6109e690600287015f5260205f208480602488870101350160051c820192602060248988010135106109ec575b0160051c0190611117565b8a6108b8565b925081926109db565b600381810204810361075257600360443560040135810204604435600401350361075257600282015f5260205f206044356004013560030281015b8260030282018110610a435750506105c8565b805f600392555f600182015560028101610a5d8154610ff7565b9081610a6c575b505001610a30565b5f91601f808211600114610a85575050555b8880610a64565b91610aa384929382845260208420940160051c840160018501611117565b5555610a7e565b634e487b7160e01b5f52604160045260245ffd5b3461013557604036600319011261013557610ad7610e84565b610adf610e9a565b905f6080604051610aef81610fa4565b828152826020820152826040820152606080820152015260018060a01b03165f525f60205263ffffffff600160405f200191165f5260205260405f20604051610b3781610fa4565b815460ff81161515825260081c6001600160a01b031660208201908152600183015460408301526002830180549390610b6f85610fe0565b94610b7d6040519687610fbf565b80865260208601915f5260205f205f925b828410610c5e5750505050600390606084019485520154926080830193845260408051936020855260c085019381511515602087015260018060a01b039051168286015201516060840152519060a06080840152815180915260e0830190602060e08260051b8601019301915f905b828210610c1157865160a087015285850386f35b90919293602080610c5060019360df198a8203018652606060408a51878060a01b03815116845285810151868501520151918160408201520190610ece565b960192019201909291610bfd565b604051908160608101106001600160401b03606084011117610aaa57602060039183606060019501604052848060a01b0386541681528486015483820152604051610cb781610cb08160028b0161102f565b0382610fbf565b6040820152815201920193019290610b8e565b34610135575f36600319011261013557602060405173af7e68bcb2fc7295492a00177f14f59b92814e708152f35b3461013557604036600319011261013557610d11610e84565b610d19610e9a565b905f604051610d2781610f89565b5260018060a01b03165f52600160205263ffffffff60405f2091165f52602052602060405f206001600160401b0360405191610d6283610f89565b5416809152604051908152f35b3461013557604036600319011261013557610d88610e84565b602435906001600160401b03821690818303610135577fe1e450892a0a26ffd9657ad355d63f03cbab7196bb7a21f7dae3e839499798d29160209160018060a01b0380821695865f5260028552610de860405f20938454938416906110e0565b67ffffffffffffffff60a01b1990911660a09190911b67ffffffffffffffff60a01b16179055604051908152a2005b34610135576020366003190112610135576004359063ffffffff60e01b821680920361013557602091638e0946e560e01b8114908115610e59575b5015158152f35b63cb7d736d60e01b811491508115610e73575b5083610e52565b6301ffc9a760e01b14905083610e6c565b600435906001600160a01b038216820361013557565b6024359063ffffffff8216820361013557565b5f5b838110610ebe5750505f910152565b8181015183820152602001610eaf565b90602091610ee781518092818552858086019101610ead565b601f01601f1916010190565b9181601f84011215610135578235916001600160401b038311610135576020838186019501011161013557565b9291906040840190604085528051809252606085019160608160051b870101916020809101935f905b838210610f5d575050505060209150930152565b909192938380610f79600193605f198d82030186528951610ece565b9701920192019094939291610f49565b602081019081106001600160401b03821117610aaa57604052565b60a081019081106001600160401b03821117610aaa57604052565b90601f801991011681019081106001600160401b03821117610aaa57604052565b6001600160401b038111610aaa5760051b60200190565b90600182811c92168015611025575b602083101461101157565b634e487b7160e01b5f52602260045260245ffd5b91607f1691611006565b80545f939261103d82610ff7565b918282526020936001916001811690815f146110a15750600114611063575b5050505050565b90939495505f92919252835f2092845f945b83861061108d57505050500101905f8080808061105c565b805485870183015294019385908201611075565b60ff19168685015250505090151560051b010191505f8080808061105c565b908060209392818452848401375f828201840152601f01601f1916010190565b6001600160a01b039182168061110c57501633036110fa57565b604051636587b01b60e11b8152600490fd5b91505033036110fa57565b818110611122575050565b5f8155600101611117565b6001600160a01b03165f908152602081905260409020805463ffffffff9283169216821015611181576001915f520160205260405f209060ff82541661116f57565b604051636b78fca360e11b8152600490fd5b604051637037cbb560e11b8152600490fdfea26469706673582212207f2c0289c14754696c1c174c260f0b5476aa04688f2c17df61d398a38b13870c64736f6c63430008170033",
    "compiler": { "version": "v0.8.23+commit.f704f362" },
    "contractName": "src/OptimisticActions.sol:OptimisticActions",
    "jsonDescription": {
      "language": "Solidity",
      "sources": {
        "lib/ens-reverse-claimable/src/ENSReverseClaimable.sol": {
          "content": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\nabstract contract ENSReverseClaimable {\n    /// @notice ENS reverse name resolution is claimable by the owner of the contract.\n    function owner() external pure virtual returns (address) {\n        return 0xaF7E68bCb2Fc7295492A00177f14F59B92814e70; // plopmenz.eth\n    }\n}\n"
        },
        "lib/openzeppelin-contracts/contracts/utils/introspection/ERC165.sol": {
          "content": "// SPDX-License-Identifier: MIT\n// OpenZeppelin Contracts (last updated v5.0.0) (utils/introspection/ERC165.sol)\n\npragma solidity ^0.8.20;\n\nimport {IERC165} from \"./IERC165.sol\";\n\n/**\n * @dev Implementation of the {IERC165} interface.\n *\n * Contracts that want to implement ERC-165 should inherit from this contract and override {supportsInterface} to check\n * for the additional interface id that will be supported. For example:\n *\n * ```solidity\n * function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {\n *     return interfaceId == type(MyInterface).interfaceId || super.supportsInterface(interfaceId);\n * }\n * ```\n */\nabstract contract ERC165 is IERC165 {\n    /**\n     * @dev See {IERC165-supportsInterface}.\n     */\n    function supportsInterface(bytes4 interfaceId) public view virtual returns (bool) {\n        return interfaceId == type(IERC165).interfaceId;\n    }\n}\n"
        },
        "lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol": {
          "content": "// SPDX-License-Identifier: MIT\n// OpenZeppelin Contracts (last updated v5.0.0) (utils/introspection/IERC165.sol)\n\npragma solidity ^0.8.20;\n\n/**\n * @dev Interface of the ERC-165 standard, as defined in the\n * https://eips.ethereum.org/EIPS/eip-165[ERC].\n *\n * Implementers can declare support of contract interfaces, which can then be\n * queried by others ({ERC165Checker}).\n *\n * For an implementation, see {ERC165}.\n */\ninterface IERC165 {\n    /**\n     * @dev Returns true if this contract implements the interface defined by\n     * `interfaceId`. See the corresponding\n     * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[ERC section]\n     * to learn more about how these ids are created.\n     *\n     * This function call must use less than 30 000 gas.\n     */\n    function supportsInterface(bytes4 interfaceId) external view returns (bool);\n}\n"
        },
        "lib/trustless-management/lib/osx-commons/contracts/src/dao/IDAO.sol": {
          "content": "// SPDX-License-Identifier: AGPL-3.0-or-later\n\npragma solidity ^0.8.8;\n\n/// @title IDAO\n/// @author Aragon Association - 2022-2023\n/// @notice The interface required for DAOs within the Aragon App DAO framework.\n/// @custom:security-contact sirt@aragon.org\ninterface IDAO {\n    /// @notice The action struct to be consumed by the DAO's `execute` function resulting in an external call.\n    /// @param to The address to call.\n    /// @param value The native token value to be sent with the call.\n    /// @param data The bytes-encoded function selector and calldata for the call.\n    struct Action {\n        address to;\n        uint256 value;\n        bytes data;\n    }\n\n    /// @notice Checks if an address has permission on a contract via a permission identifier and considers if `ANY_ADDRESS` was used in the granting process.\n    /// @param _where The address of the contract.\n    /// @param _who The address of a EOA or contract to give the permissions.\n    /// @param _permissionId The permission identifier.\n    /// @param _data The optional data passed to the `PermissionCondition` registered.\n    /// @return Returns true if the address has permission, false if not.\n    function hasPermission(\n        address _where,\n        address _who,\n        bytes32 _permissionId,\n        bytes memory _data\n    ) external view returns (bool);\n\n    /// @notice Updates the DAO metadata (e.g., an IPFS hash).\n    /// @param _metadata The IPFS hash of the new metadata object.\n    function setMetadata(bytes calldata _metadata) external;\n\n    /// @notice Emitted when the DAO metadata is updated.\n    /// @param metadata The IPFS hash of the new metadata object.\n    event MetadataSet(bytes metadata);\n\n    /// @notice Executes a list of actions. If a zero allow-failure map is provided, a failing action reverts the entire execution. If a non-zero allow-failure map is provided, allowed actions can fail without the entire call being reverted.\n    /// @param _callId The ID of the call. The definition of the value of `callId` is up to the calling contract and can be used, e.g., as a nonce.\n    /// @param _actions The array of actions.\n    /// @param _allowFailureMap A bitmap allowing execution to succeed, even if individual actions might revert. If the bit at index `i` is 1, the execution succeeds even if the `i`th action reverts. A failure map value of 0 requires every action to not revert.\n    /// @return The array of results obtained from the executed actions in `bytes`.\n    /// @return The resulting failure map containing the actions have actually failed.\n    function execute(\n        bytes32 _callId,\n        Action[] memory _actions,\n        uint256 _allowFailureMap\n    ) external returns (bytes[] memory, uint256);\n\n    /// @notice Emitted when a proposal is executed.\n    /// @param actor The address of the caller.\n    /// @param callId The ID of the call.\n    /// @param actions The array of actions executed.\n    /// @param allowFailureMap The allow failure map encoding which actions are allowed to fail.\n    /// @param failureMap The failure map encoding which actions have failed.\n    /// @param execResults The array with the results of the executed actions.\n    /// @dev The value of `callId` is defined by the component/contract calling the execute function. A `Plugin` implementation can use it, for example, as a nonce.\n    event Executed(\n        address indexed actor,\n        bytes32 callId,\n        Action[] actions,\n        uint256 allowFailureMap,\n        uint256 failureMap,\n        bytes[] execResults\n    );\n\n    /// @notice Emitted when a standard callback is registered.\n    /// @param interfaceId The ID of the interface.\n    /// @param callbackSelector The selector of the callback function.\n    /// @param magicNumber The magic number to be registered for the callback function selector.\n    event StandardCallbackRegistered(\n        bytes4 interfaceId,\n        bytes4 callbackSelector,\n        bytes4 magicNumber\n    );\n\n    /// @notice Deposits (native) tokens to the DAO contract with a reference string.\n    /// @param _token The address of the token or address(0) in case of the native token.\n    /// @param _amount The amount of tokens to deposit.\n    /// @param _reference The reference describing the deposit reason.\n    function deposit(address _token, uint256 _amount, string calldata _reference) external payable;\n\n    /// @notice Emitted when a token deposit has been made to the DAO.\n    /// @param sender The address of the sender.\n    /// @param token The address of the deposited token.\n    /// @param amount The amount of tokens deposited.\n    /// @param _reference The reference describing the deposit reason.\n    event Deposited(\n        address indexed sender,\n        address indexed token,\n        uint256 amount,\n        string _reference\n    );\n\n    /// @notice Emitted when a native token deposit has been made to the DAO.\n    /// @dev This event is intended to be emitted in the `receive` function and is therefore bound by the gas limitations for `send`/`transfer` calls introduced by [ERC-2929](https://eips.ethereum.org/EIPS/eip-2929).\n    /// @param sender The address of the sender.\n    /// @param amount The amount of native tokens deposited.\n    event NativeTokenDeposited(address sender, uint256 amount);\n\n    /// @notice Setter for the trusted forwarder verifying the meta transaction.\n    /// @param _trustedForwarder The trusted forwarder address.\n    function setTrustedForwarder(address _trustedForwarder) external;\n\n    /// @notice Getter for the trusted forwarder verifying the meta transaction.\n    /// @return The trusted forwarder address.\n    function getTrustedForwarder() external view returns (address);\n\n    /// @notice Emitted when a new TrustedForwarder is set on the DAO.\n    /// @param forwarder the new forwarder address.\n    event TrustedForwarderSet(address forwarder);\n\n    /// @notice Checks whether a signature is valid for a provided hash according to [ERC-1271](https://eips.ethereum.org/EIPS/eip-1271).\n    /// @param _hash The hash of the data to be signed.\n    /// @param _signature The signature byte array associated with `_hash`.\n    /// @return Returns the `bytes4` magic value `0x1626ba7e` if the signature is valid and `0xffffffff` if not.\n    function isValidSignature(bytes32 _hash, bytes memory _signature) external returns (bytes4);\n\n    /// @notice Registers an ERC standard having a callback by registering its [ERC-165](https://eips.ethereum.org/EIPS/eip-165) interface ID and callback function signature.\n    /// @param _interfaceId The ID of the interface.\n    /// @param _callbackSelector The selector of the callback function.\n    /// @param _magicNumber The magic number to be registered for the function signature.\n    function registerStandardCallback(\n        bytes4 _interfaceId,\n        bytes4 _callbackSelector,\n        bytes4 _magicNumber\n    ) external;\n\n    /// @notice Removed function being left here to not corrupt the IDAO interface ID. Any call will revert.\n    /// @dev Introduced in v1.0.0. Removed in v1.4.0.\n    function setSignatureValidator(address) external;\n}\n"
        },
        "lib/trustless-management/src/IDAOExtensionWithAdmin.sol": {
          "content": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\nimport {IDAO} from \"../lib/osx-commons/contracts/src/dao/IDAO.sol\";\n\ninterface IDAOExtensionWithAdmin {\n    error SenderIsNotAdmin();\n\n    event AdminSet(IDAO indexed dao, address admin);\n\n    /// @notice Registers or updates the admin of a DAO. The admin has the permission to change permissions.\n    /// @param _dao The DAO this admin will control.\n    /// @param _admin The address that will control the DAO.\n    /// @dev If no admin is set, this can only be called by the DAO itself. When an admin is set, only the existing admin can update.\n    function setAdmin(IDAO _dao, address _admin) external;\n}\n"
        },
        "lib/trustless-management/src/IDAOManager.sol": {
          "content": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\nimport {IDAOExtensionWithAdmin, IDAO} from \"./IDAOExtensionWithAdmin.sol\";\n\ninterface IDAOManager is IDAOExtensionWithAdmin {\n    error AccessDenied();\n\n    event Execution(\n        IDAO indexed dao,\n        uint256 indexed role,\n        address indexed sender,\n        IDAO.Action[] actions,\n        bytes[] returnValues,\n        uint256 failureMap\n    );\n\n    /// @notice Executes a list of actions as the DAO.\n    /// @param _dao Which DAO should execute the actions.\n    /// @param _role The role to use for validation if execution is allowed.\n    /// @param _actions The actions to execute.\n    /// @param _failureMap Which actions are allowed to fail without reverting the whole transaction.\n    /// @dev Only a single role means that a user satisfies multiple roles they might need to split their actions into multiple batches (one per role).\n    function asDAO(IDAO _dao, uint256 _role, IDAO.Action[] calldata _actions, uint256 _failureMap)\n        external\n        returns (bytes[] memory returnValues, uint256 failureMap);\n}\n"
        },
        "src/IOptimisticActions.sol": {
          "content": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\nimport {IDAOExtensionWithAdmin} from \"../lib/trustless-management/src/IDAOExtensionWithAdmin.sol\";\nimport {ITrustlessActions, IDAOManager, IDAO} from \"./ITrustlessActions.sol\";\n\ninterface IOptimisticActions is ITrustlessActions, IDAOExtensionWithAdmin {\n    error OptimisticRequestNotExecutableYet();\n\n    event OptimisticActionCreated(uint32 indexed id, IDAO indexed dao, uint64 executableFrom);\n    event OptimisticActionRejected(uint32 indexed id, IDAO indexed dao, string metadata);\n    event OptimisticExecuteDelaySet(IDAO indexed dao, uint64 executeDelay);\n\n    /// @notice A container for all optimistic settings related to a certain DAO.\n    /// @param admin The address that can change the settings for this DAO. Default address(0) means the DAO itself.\n    /// @param executeDelay How long actions need to wait before they become executable (if not rejected before).\n    struct OptimisticDAOSettings {\n        address admin;\n        uint64 executeDelay;\n    }\n\n    /// @notice A container for all info related to an optimistic execute action request.\n    /// @param executableFrom From what block time the request becomes executable.\n    struct OptimisticActionRequest {\n        uint64 executableFrom;\n    }\n\n    /// @notice Gets a certain optimstic action request.\n    /// @param _dao The DAO that has the request.\n    /// @param _id The id of the request.\n    function getOptimsticAction(IDAO _dao, uint32 _id) external view returns (OptimisticActionRequest memory request);\n\n    /// @notice Rejects a certain action request. The sender should be the DAO (utilizing a management solution).\n    /// @param _id The id of the request.\n    /// @param _metadata Additional info from the rejector.\n    function rejectAction(uint32 _id, string calldata _metadata) external;\n\n    /// @notice Changes the execute delay of a DAO.\n    /// @param _dao The DAO to change the settings of.\n    /// @param _executeDelay The new execute delay.\n    /// @dev By default this value is 0, meaning there is no delay. This is likely not desired so you are recommened to set the delay before granting this contract any permissions.\n    function setExecuteDelay(IDAO _dao, uint64 _executeDelay) external;\n}\n"
        },
        "src/ITrustlessActions.sol": {
          "content": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\nimport {IDAOManager, IDAO} from \"../lib/trustless-management/src/IDAOManager.sol\";\n\ninterface ITrustlessActions {\n    error RequestDoesNotExist();\n    error RequestAlreadyExecuted();\n\n    event ActionCreated(\n        uint32 indexed id,\n        IDAO indexed dao,\n        IDAOManager manager,\n        uint256 role,\n        IDAO.Action[] actions,\n        uint256 failureMap,\n        string metadata\n    );\n    event ActionExecuted(\n        uint32 indexed id, IDAO indexed dao, address indexed executor, bytes[] returnValues, uint256 failureMap\n    );\n\n    /// @notice A container for multiple requests.\n    /// @param requestCount How many proposed actions have been created.\n    /// @param getRequest The proposed actions to be executed.\n    struct ActionRequests {\n        uint32 requestCount;\n        mapping(uint32 id => ActionRequest request) getRequest;\n    }\n\n    /// @notice A container for all info related to an execute action request.\n    /// @param executed If the action has been executed.\n    /// @param manager The management contract to use for the execution.\n    /// @param role The role to use for the execution.\n    /// @param actions The actions to execute.\n    /// @param failureMap Which actions are allowed to fail without reverting the transaction.\n    struct ActionRequest {\n        bool executed;\n        IDAOManager manager;\n        uint256 role;\n        IDAO.Action[] actions;\n        uint256 failureMap;\n    }\n\n    /// @notice Gets a certain action request.\n    /// @param _dao The DAO that has the request.\n    /// @param _id The id of the request.\n    function getAction(IDAO _dao, uint32 _id) external view returns (ActionRequest memory request);\n\n    /// @notice Creates a request to execute certain actions.\n    /// @param _manager The management contract to use for performing the actions.\n    /// @param _role The role of the management contract to use for performing the actions.\n    /// @param _actions The actions that are proposed to be executed.\n    /// @param _failureMap The actions that are allowed to be revert.\n    /// @param _metadata Additional info from the creator.\n    /// @dev The sender should be the DAO (utilizing a management solution).\n    function createAction(\n        IDAOManager _manager,\n        uint256 _role,\n        IDAO.Action[] calldata _actions,\n        uint256 _failureMap,\n        string calldata _metadata\n    ) external returns (uint32 id);\n\n    /// @notice Executes a certain action request.\n    /// @param _dao The DAO that has the request.\n    /// @param _id The id of the request.\n    /// @dev This is only possible if the request has not been executed yet and the conditions of the TrustlessActions implementation are met.\n    function executeAction(IDAO _dao, uint32 _id) external returns (bytes[] memory returnValues, uint256 failureMap);\n}\n"
        },
        "src/OptimisticActions.sol": {
          "content": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\nimport {TrustlessActions} from \"./TrustlessActions.sol\";\nimport {\n    IOptimisticActions, ITrustlessActions, IDAO, IDAOManager, IDAOExtensionWithAdmin\n} from \"./IOptimisticActions.sol\";\n\ncontract OptimisticActions is TrustlessActions, IOptimisticActions {\n    mapping(IDAO dao => mapping(uint32 id => OptimisticActionRequest optimisticRequests)) private optimisticDaoRequests;\n    mapping(IDAO dao => OptimisticDAOSettings settings) private optimisticDaoSettings;\n\n    /// @inheritdoc TrustlessActions\n    function supportsInterface(bytes4 _interfaceId) public view virtual override returns (bool) {\n        return _interfaceId == type(IOptimisticActions).interfaceId || super.supportsInterface(_interfaceId);\n    }\n\n    /// @inheritdoc IOptimisticActions\n    function getOptimsticAction(IDAO _dao, uint32 _id) external view returns (OptimisticActionRequest memory request) {\n        return optimisticDaoRequests[_dao][_id];\n    }\n\n    /// @inheritdoc TrustlessActions\n    function createAction(\n        IDAOManager _manager,\n        uint256 _role,\n        IDAO.Action[] calldata _actions,\n        uint256 _failureMap,\n        string calldata _metadata\n    ) public override(TrustlessActions, ITrustlessActions) returns (uint32 id) {\n        id = super.createAction(_manager, _role, _actions, _failureMap, _metadata);\n\n        OptimisticDAOSettings storage settings = optimisticDaoSettings[IDAO(msg.sender)];\n        uint64 executableFrom = _toUint64(block.timestamp) + settings.executeDelay;\n\n        OptimisticActionRequest storage request = optimisticDaoRequests[IDAO(msg.sender)][id];\n        request.executableFrom = executableFrom;\n        emit OptimisticActionCreated(id, IDAO(msg.sender), executableFrom);\n    }\n\n    /// @inheritdoc IOptimisticActions\n    function rejectAction(uint32 _id, string calldata _metadata) external {\n        _ensureRequestNotExecuted(IDAO(msg.sender), _id);\n\n        // Becomes executable in the year 584_554_051_223 (kudos if this smart contract is still used at that time)\n        OptimisticActionRequest storage request = optimisticDaoRequests[IDAO(msg.sender)][_id];\n        request.executableFrom = type(uint64).max;\n        emit OptimisticActionRejected(_id, IDAO(msg.sender), _metadata);\n    }\n\n    /// @inheritdoc TrustlessActions\n    function _ensureRequestExecutable(IDAO _dao, uint32 _id) internal view override {\n        OptimisticActionRequest storage request = optimisticDaoRequests[_dao][_id];\n        if (block.timestamp < request.executableFrom) {\n            revert OptimisticRequestNotExecutableYet();\n        }\n    }\n\n    /// @inheritdoc IOptimisticActions\n    function setExecuteDelay(IDAO _dao, uint64 _executeDelay) external {\n        OptimisticDAOSettings storage settings = optimisticDaoSettings[_dao];\n        _ensureSenderIsAdmin(_dao, settings.admin);\n\n        settings.executeDelay = _executeDelay;\n        emit OptimisticExecuteDelaySet(_dao, _executeDelay);\n    }\n\n    /// @inheritdoc IDAOExtensionWithAdmin\n    function setAdmin(IDAO _dao, address _admin) external {\n        OptimisticDAOSettings storage settings = optimisticDaoSettings[_dao];\n        _ensureSenderIsAdmin(_dao, settings.admin);\n        settings.admin = _admin;\n        emit AdminSet(_dao, _admin);\n    }\n\n    function _ensureSenderIsAdmin(IDAO _dao, address _admin) internal view {\n        if (_admin == address(0)) {\n            // Admin not set means DAO is the admin\n            if (msg.sender != address(_dao)) {\n                revert SenderIsNotAdmin();\n            }\n        } else {\n            // Specific admin will only be allowed. DAO is not allowed to change permissions. (for example: if it is a SubDAO)\n            if (msg.sender != _admin) {\n                revert SenderIsNotAdmin();\n            }\n        }\n    }\n\n    error Overflow();\n\n    function _toUint64(uint256 value) internal pure returns (uint64) {\n        if (value > type(uint64).max) {\n            revert Overflow();\n        }\n        return uint64(value);\n    }\n}\n"
        },
        "src/TrustlessActions.sol": {
          "content": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\nimport {ERC165} from \"../lib/openzeppelin-contracts/contracts/utils/introspection/ERC165.sol\";\nimport {ENSReverseClaimable} from \"../lib/ens-reverse-claimable/src/ENSReverseClaimable.sol\";\n\nimport {ITrustlessActions, IDAO, IDAOManager} from \"./ITrustlessActions.sol\";\n\nabstract contract TrustlessActions is ERC165, ENSReverseClaimable, ITrustlessActions {\n    mapping(IDAO dao => ActionRequests requests) private daoRequests;\n\n    /// @inheritdoc ERC165\n    function supportsInterface(bytes4 _interfaceId) public view virtual override returns (bool) {\n        return _interfaceId == type(ITrustlessActions).interfaceId || super.supportsInterface(_interfaceId);\n    }\n\n    /// @inheritdoc ITrustlessActions\n    function getAction(IDAO _dao, uint32 _id) external view override returns (ActionRequest memory request) {\n        return daoRequests[_dao].getRequest[_id];\n    }\n\n    /// @inheritdoc ITrustlessActions\n    function createAction(\n        IDAOManager _manager,\n        uint256 _role,\n        IDAO.Action[] calldata _actions,\n        uint256 _failureMap,\n        string calldata _metadata\n    ) public virtual returns (uint32 id) {\n        ActionRequests storage requests = daoRequests[IDAO(msg.sender)];\n        id = requests.requestCount++;\n\n        ActionRequest storage request = requests.getRequest[id];\n        // executed = false (default value)\n        request.manager = _manager;\n        request.role = _role;\n        request.actions = _actions;\n        request.failureMap = _failureMap;\n        emit ActionCreated(id, IDAO(msg.sender), _manager, _role, _actions, _failureMap, _metadata);\n    }\n\n    /// @inheritdoc ITrustlessActions\n    function executeAction(IDAO _dao, uint32 _id) external returns (bytes[] memory returnValues, uint256 failureMap) {\n        ActionRequest storage request = _ensureRequestNotExecuted(_dao, _id);\n        _ensureRequestExecutable(_dao, _id);\n\n        request.executed = true;\n        (returnValues, failureMap) = request.manager.asDAO(_dao, request.role, request.actions, request.failureMap);\n        emit ActionExecuted(_id, _dao, msg.sender, returnValues, failureMap);\n    }\n\n    function _ensureRequestExists(IDAO _dao, uint32 _id) internal view returns (ActionRequest storage request) {\n        ActionRequests storage requests = daoRequests[_dao];\n        if (_id >= requests.requestCount) {\n            revert RequestDoesNotExist();\n        }\n\n        request = requests.getRequest[_id];\n    }\n\n    function _ensureRequestNotExecuted(IDAO _dao, uint32 _id) internal view returns (ActionRequest storage request) {\n        request = _ensureRequestExists(_dao, _id);\n        if (request.executed) {\n            revert RequestAlreadyExecuted();\n        }\n    }\n\n    function _ensureRequestExecutable(IDAO _dao, uint32 _id) internal view virtual;\n}\n"
        }
      },
      "settings": {
        "remappings": [
          "@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/",
          "ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/",
          "ens-reverse-claimable/=lib/ens-reverse-claimable/src/",
          "erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/",
          "forge-std/=lib/forge-std/src/",
          "openzeppelin-contracts/=lib/openzeppelin-contracts/",
          "osx-commons/=lib/trustless-management/lib/osx-commons/",
          "smart-account/=lib/smart-account/src/",
          "tag-manager/=lib/trustless-management/lib/tag-manager/src/",
          "trustless-management/=lib/trustless-management/src/"
        ],
        "optimizer": { "enabled": true, "runs": 200 },
        "evmVersion": "shanghai",
        "viaIR": true
      },
      "metadata": { "useLiteralContent": true }
    },
    "license": "MIT"
  },
  "source": "/home/plopmenz/openmesh-smart-contracts/lib/trustless-actions",
  "submitted": {
    "transactionHash": "0xb96de5f4aaf049f788e40e89204dd19696d08f7816d4eb711d53ee10f63b3e73",
    "date": "2024-04-01T20:42:35.496Z"
  }
}
